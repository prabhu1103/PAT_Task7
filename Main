CREATE DATABASE IMDB;
USE IMDB;


CREATE TABLE Movie (
    movie_id INT AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    release_year INT
);


CREATE TABLE Media (
    media_id INT AUTO_INCREMENT PRIMARY KEY,
    movie_id INT,
    media_type ENUM('Video', 'Image') NOT NULL,
    url VARCHAR(255) NOT NULL,
    FOREIGN KEY (movie_id) REFERENCES Movie(movie_id)
);


CREATE TABLE Genre (
    genre_id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(50) NOT NULL
);


CREATE TABLE MovieGenre (
    movie_id INT,
    genre_id INT,
    PRIMARY KEY (movie_id, genre_id),
    FOREIGN KEY (movie_id) REFERENCES Movie(movie_id),
    FOREIGN KEY (genre_id) REFERENCES Genre(genre_id)
);


CREATE TABLE User (
    user_id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(100) NOT NULL
);


CREATE TABLE Review (
    review_id INT AUTO_INCREMENT PRIMARY KEY,
    movie_id INT,
    user_id INT,
    review_text TEXT,
    rating INT,
    review_date DATE,
    FOREIGN KEY (movie_id) REFERENCES Movie(movie_id),
    FOREIGN KEY (user_id) REFERENCES User(user_id)
);


CREATE TABLE Artist (
    artist_id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL
);


CREATE TABLE Skill (
    skill_id INT AUTO_INCREMENT PRIMARY KEY,
    skill_name VARCHAR(100) NOT NULL
);

CREATE TABLE ArtistSkill (
    artist_id INT,
    skill_id INT,
    PRIMARY KEY (artist_id, skill_id),
    FOREIGN KEY (artist_id) REFERENCES Artist(artist_id),
    FOREIGN KEY (skill_id) REFERENCES Skill(skill_id)
);


CREATE TABLE Role (
    role_id INT AUTO_INCREMENT PRIMARY KEY,
    role_name VARCHAR(100) NOT NULL
);


CREATE TABLE MovieCasting (
    movie_id INT,
    artist_id INT,
    role_id INT,
    PRIMARY KEY (movie_id, artist_id, role_id),
    FOREIGN KEY (movie_id) REFERENCES Movie(movie_id),
    FOREIGN KEY (artist_id) REFERENCES Artist(artist_id),
    FOREIGN KEY (role_id) REFERENCES Role(role_id)
);


INSERT INTO Genre (name) VALUES ('Action'), ('Comedy');

INSERT INTO Movie (title, release_year) VALUES ('Inception', 2010);

INSERT INTO MovieGenre (movie_id, genre_id) VALUES (1, 1);

INSERT INTO Media (movie_id, media_type, url) VALUES (1, 'Video', 'inception_trailer.mp4'), (1, 'Image', 'inception_poster.jpg');

INSERT INTO User (username) VALUES ('john_doe');

INSERT INTO Review (movie_id, user_id, review_text, rating, review_date) VALUES (1, 1, 'Amazing!', 5, '2020-01-01');

INSERT INTO Artist (name) VALUES ('Leonardo DiCaprio');

INSERT INTO Skill (skill_name) VALUES ('Acting'), ('Dancing');

INSERT INTO ArtistSkill (artist_id, skill_id) VALUES (1, 1), (1, 2);

INSERT INTO Role (role_name) VALUES ('Hero'), ('Dancer');

INSERT INTO MovieCasting (movie_id, artist_id, role_id) VALUES (1, 1, 1), (1, 1, 2);